---
import ScrollingTags from "./ScrollingTags.astro";

export interface Props {
  uniqueTags: string[];
}

const { uniqueTags } = Astro.props as Props;
---

<section
  class="relative h-[calc(100vh-4rem)] overflow-hidden bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950"
>
  <!-- Hero background image (replaces the previous grid gradient). -->
  <div
    class="absolute inset-0 bg-cover bg-center animate-pulse"
    style="background-image: url('/og.webp'); -webkit-mask-image: radial-gradient(ellipse_60%_50%_at_50%_0%, #000 70%, transparent 110%); mask-image: radial-gradient(ellipse_60%_50%_at_50%_0%, #000 70%, transparent 110%);"
  >
    <!-- Optional dark overlay to keep text readable. Adjust opacity as needed. -->
    <div class="absolute inset-0 bg-black/40"></div>
  </div>

  <ScrollingTags uniqueTags={uniqueTags} />

  <div
    class="absolute top-1/4 left-1/4 w-96 h-96 bg-emerald-500/10 rounded-full blur-3xl animate-pulse"
  >
  </div>
  <div
    class="absolute bottom-1/4 right-1/4 w-96 h-96 bg-blue-500/10 rounded-full blur-3xl animate-pulse delay-1000"
  >
  </div>
  <div
    class="absolute top-1/2 right-1/3 w-64 h-64 bg-purple-500/10 rounded-full blur-2xl animate-pulse delay-2000"
  >
  </div>

  <div
    class="relative mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 h-full flex items-center pointer-events-none"
  >
    <div class="text-center w-full">
      <div
        class="relative flex flex-col justify-center items-center pointer-events-auto"
        id="mona-text"
      >
        <div id="hero-content">
          <h1
            class="mb-4 text-5xl font-bold tracking-tight text-white sm:text-7xl"
          >
            <span
              class="relative inline-block text-primary text-glow animate-pulse"
            >
              niubility 2.0
            </span>{" "}â€” HCI Projects
          </h1>

          <p class="mx-auto max-w-3xl text-xl text-white leading-relaxed">
            Exploring user-centered design, prototyping and evaluation from our HCI group.
          </p>
        </div>
      </div>
    </div>
  </div>
</section>

<script>
  import { createTimeline, stagger, text } from "animejs";

  document.addEventListener("DOMContentLoaded", () => {
    const heroContent = document.getElementById("hero-content");

    const startTags = () => {
      document.dispatchEvent(new Event("start-tags"));
    };

    if (heroContent) {
      const { chars } = text.split(heroContent, {
        words: false,
        chars: true,
      });

      const headlineTimeline = createTimeline({
        loop: false,
        defaults: { ease: "inOut(3)", duration: 1500 },
      });

      headlineTimeline
        .add(
          chars,
          {
            y: [($el) => (+$el.dataset.line % 2 ? "100%" : "-200%"), "0%"],
            opacity: [0, 1],
          },
          stagger(10, { from: "random" })
        )
        .init()
        .then(startTags);
    } else {
      startTags();
    }
  });
</script>
